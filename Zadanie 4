//
// Created by Mariusz on 14.03.2020.
//

#include <stdio.h>
#include <stdlib.h>
#include <math.h>
 
float suma=0;
 
float f(float f)
{
    return f*f*f*f*f*3;   //dowolna funkcja z ktorej chce policzyc calke
}
 
float simpson_policz(float a,float b)
{
    float c=(b+a)/2.0;
    float S;
    float h=b-a;
    S=h*(f(a)+4*f(c)+f(b))/6.0;
    return S;
}
 
float simpson(float a,float b,float delta)
{
    float c=(b+a)/2.0;
    double d=fabs(simpson_policz(a,b)-(simpson_policz(a,c)+simpson_policz(c,b)));
    if(d<delta)
        return simpson_policz(a,b);
    suma=simpson(a,c,delta/2.0)+simpson(c,b,delta/2.0);
    return suma;
}
 
int main() {
    float a;
    float b;
    float delta;
    printf("Podaj poczatek przedzialu calkowania:\n");
    scanf("%f",&a);
    printf("Podaj koniec przedzialu calkowania:\n");
    scanf("%f",&b);
    printf("Podaj maksymalny dopuszczalny blad:\n");
    scanf("%f",&delta);
    printf("%f",simpson(a,b,delta));
 
 
    return 0;
